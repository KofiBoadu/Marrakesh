{% extends "base.html" %}



{% block content %}


<div class="dashboard">

    <div class="dashboard_card">
        <div class="dashboard_container1">
            <img class="dashboard_icon" width="64" height="64"
                src="https://img.icons8.com/windows/64/ff914c/stocks-growth.png" alt="stocks-growth" />
        </div>
        <div class="dashboard_container2">
            <h1 class="dashboard_header">${{revenue}}</h1>
            <h5 class="dashboard_subheader">Gross revenue since {{year}} </h5>
        </div>

    </div>
    <div class="dashboard_card">
        <div class="dashboard_container1">
            <img class="dashboard_icon" width="64" height="64"
                src="https://img.icons8.com/pastel-glyph/64/FF914C/person-male--v3.png" alt="person-male--v3" />
        </div>
        <div class="dashboard_container2">
            <h1 class="dashboard_header">{{total_travelers}}</h1>
            <h5 class="dashboard_subheader">Total number of travellers since {{year}}</h5>
        </div>

    </div>
    <div class="dashboard_card">
        <div class="dashboard_container1">
            <img class="dashboard_icon" width="64" height="64"
                src="https://img.icons8.com/material-sharp/64/ff914c/economic-improvement.png"
                alt="economic-improvement" />
        </div>
        <div class="dashboard_container2">
            <h1 class="dashboard_header">$10760.0</h1>
            <h5 class="dashboard_subheader">Profit generated since {{year}}</h5>
        </div>

    </div>

</div>

<!-- form to add customers -->
<div class="modal" id="popUp">
    <div class="modal_title">
        <h3 class="modal_title--header">Create Costumer</h3>

        <img class="modal_title--close" id="close" width="24" height="24"
            src="https://img.icons8.com/material-outlined/24/FFFFFF/delete-sign.png" alt="delete-sign" />
    </div>
    <form class="modal__form" action="{{ url_for('customers.add_paid_customer') }}" method="post">

        <!-- First Name -->
        <div class="modal_wrap">
            <label for="firstName">First Name</label>
            <input type="text" id="firstName" name="first_name" required>
        </div>

        <!-- Last Name -->
        <div class="modal_wrap">
            <label for="lastName">Last Name</label>
            <input type="text" id="lastName" name="last_name" required>
        </div>

        <!-- Email -->
        <div class="modal_wrap">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>
        </div>


        <!-- Phone -->
        <div class="modal_wrap">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" name="phone" required>
        </div>

        <!-- State (Dropdown with all states and initials) -->
        <div class="modal_wrap">
            <label for="state">State:</label>
            <input type="text" id="state" name="state">
        </div>

        <!-- Gender Option -->
        <div class="modal_wrap">
            <label>Gender</label>
            <div class="modal_wrap--gender">
                <input class="radio" id='radio' type="radio" id="male" name="gender" value="male">
                <label id='gender' for="male">Male</label>
                <input  class="radio" id='radio' type="radio" id="female" name="gender" value="female">
                <label id='gender' for="female">Female</label>
                
            </div>
        </div>

        <!-- Tours Dropdown -->
        <div class="modal_wrap">
            <label for="tour">Select a tour</label>
            <select  class="tour-select" name="tour_date">
                {% for date in available_dates %}
                <option value="{{ date }}">{{ date }}</option>

                {% endfor %}
            </select>
        </div>

        <!-- Submit Button -->
        <div class="modal_wrap">
            <button class="modal_submit" type="submit">Create customer</button>
        </div>
        {% with messages = get_flashed_messages(category_filter=["customer_success"]) %}
        {% if messages %}
        <ul>
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}

        {% with messages = get_flashed_messages(category_filter=["customer_exist"]) %}
        {% if messages %}
        <ul>
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
    </form>


</div>





<!-- <h2>Add new tours</h2>
    <form action="{{ url_for('customers.add_new_tours') }}" method="post">
        <div>
            <label for="first_name">Name:</label>
            <input type="text" id="name" name="name">
        </div>
        <div>
            <label for="start_date">Start Date:</label>
            <input type="text" id="start_date" name="start_date">
        </div>
        <div>
            <label for="end_date">End Date:</label>
            <input type="text" id="end_date" name="end_date">
        </div>
        <div>
            <label for="price">price:</label>
            <input type="number" id="price" name="price">
        </div>
      
        <div>
            <label>Type of tour:</label>
            <input type="radio" id="private" name="tour_type" value="private">
            <label for="male">private</label>
            <input type="radio" id="group" name="tour_type" value="group">
            <label for="female">group</label>
            
        </div>

         <div>
        <label for="destination">Choose Destination:</label>
            <select id="destination" name="destination">
                {% for destination in destinations %}
                <option value="{{ destination }}">{{ destination }}</option>
                {% endfor %}
            </select>
    </div>

        <div>
            <button type="submit">Submit</button>
        </div>

            {% with messages = get_flashed_messages(category_filter=["tour_success"]) %}
                  {% if messages %}
                    <ul>
                    {% for message in messages %}
                      <li>{{ message }}</li>
                    {% endfor %}
                    </ul>
                  {% endif %}
                {% endwith %}
    </form>
 -->




<div id="table-container">
    <table id="data-table">
        <div id="table-header">
            <h3 id="table-title">Customers</h3>
            <div id="table-action">
                <button id="createCustomerBtn">Add Customer</button>
                <button id="tourBtn">Add Tour</button>
            </div>
        </div>
        <thead id="table-head">
            <tr>
                <th id="select-box">
                    <input type="checkbox" class="delete-checkbox">
                    <label for="select-all"></label>
                </th>
                <th>Full Name</th>
                <th>State</th>
                <th>Email</th>
                <th>Mobile</th>
                <th>Tour</th>
                <th>Travel Year </th>
                <th>Tour Price</th>
                <th>Tour Type</th>

            </tr>
        </thead>

        <tbody id="table-body">
            {% for customer in customers %}
            <tr>
                <td>
                    <input type="checkbox" class="delete-checkbox" data-id="{{ customer[0] }}"
                        id="delete-customer-{{ loop.index }}">
                    <!-- <label for="delete-customer-{{ loop.index }}"></label> -->
                </td>
                <!-- <td>{{ customer[0] }}</td> -->
                <td><a href="{{ url_for('profiles.customer_profile',customer_id=customer[0]) }}">{{ customer[1].capitalize() }}</a>
                </td>
                <td>{{ customer[2].upper() if customer[2] is not none else '' }}</td>
                <td><a href="mailto:{{ customer[3] }}"> {{ customer[3] }}</a></td>


                <td>{{ format_phone_number(customer[4]) }}</td>
                <td>{{ customer[5] }}</td>
                <td>
                    <!-- {% if customer[6] is number %} -->
                    {{ customer[6]}}
                    <!-- {% else %} -->
                    
                    <!-- {% endif %} -->
                </td>

                <td>{{ customer[7] }}</td>
                <td>{{ customer[8] }}</td>

            </tr>
            {% endfor %}
        </tbody>


    </table>
</div>

{% endblock %}